<!DOCTYPE html>
<html lang="en">

<head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="icon" href="http://getbootstrap.com/favicon.ico">

    <title>Administración de tiendas</title>

    <!-- Bootstrap Core CSS -->
    <link href="css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom styles for this template -->
    <link href="css/signin.css" rel="stylesheet">

      <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <script type="text/javascript" src="api/libs/jquery-1.11.3.min.js"></script>
    <script type="text/javascript" src="api/libs/js.cookie.js"></script>
    <script type="text/javascript" src="api/ropapp.api.js"></script>

    <script>
        $(document).ready( function() {        
            if(Ropapp.isLoggedIn())
                Ropapp.logout();

            $("#signin").click( function() {
                var credentials = {
                    username: $("#inputEmail").val(), 
                    pass: $("#inputPassword").val()
                };

                Ropapp.login( credentials, 
                    function(response) {
                        $("#enter")[0].click();
                    },
                    function(response) {
                        $("#unsuccessfullLogin").html("<br>"+response);
                        $("#inputPassword").val("");
                    }
                );
            });

            $("#createbtn").click( function() {
                var newUser = {
                    username: $("#username").val(), 
                    first_name: $("#first_name").val(),
                    last_name: $("#last_name").val(),
                    mail: $("#mail").val(),
                    type: $("input:radio[name=optionsRadios]:checked").val(),
                    pass: $("#pass").val(),
                    pass_rep: $("#pass_rep").val(),
                    width: $("#width").val(),
                    height: $("#height").val(),
                };

                Ropapp.registerUser( newUser, 
                    function(response) {
                        $("#enter")[0].click();
                    },
                    function(response) {
                        
                    });
            });
        });
    </script>
</head>

  <body>

	<div class="container-fluid">
		<div class="row">
			  <form class="form-signin" action="index.html">
				<h2 class="form-signin-heading">Por favor loggeése</h2>
				<label for="inputEmail" class="sr-only">Nombre de usuario</label>
				<input id="inputEmail" class="form-control" placeholder="Nombre de usuario" required="" autofocus="" type="text">
				<label for="inputPassword" class="sr-only">Contraseña</label>
				<input id="inputPassword" class="form-control" placeholder="Contraseña" required="" type="password">
				<div class="checkbox">
				  <label>
					<input value="remember-me" type="checkbox"> Recordar contraseña
				  </label>
				</div>
				<div id="unsuccessfullLogin"></div>
				<button href="#" class="btn btn-lg btn-primary btn-block" type="button" id="signin">Sign in</button>
				<a href="index.html" id="enter"></a>
			  </form>
		</div>
		 <div class="row">
                    <div class="col-lg-12">	
						<div class="panel panel-default">
							<div class="panel-heading">Creación de cuentas de usuario</div>
								<div class="panel-body">
									<div class="form-group">
										<label>Nombre de usuario (Username)</label>
										<input class="form-control" placeholder="Ingresar nombre de usuario." id="username">
									</div>
									<div class="form-group">
										<label>Nombre</label>
										<input class="form-control" placeholder="Ingresar nombre del usuario." id="first_name">
									</div>
									<div class="form-group">
										<label>Apellido</label>
										<input class="form-control" placeholder="Ingresar apellido del usuario." id="last_name">
									</div>	
									<div class="form-group">
										<label>Email</label>
										<input class="form-control" placeholder="Ingresar email del usuario." id="mail">
									</div>	
									<div class="form-group">
										<label>Tipo de usuario</label>
											<div class="radio">
												<label>
													<input type="radio" name="optionsRadios" id="designer" value="designer">Diseñador
												</label>
											</div>
											<div class="radio">
												<label>
													<input type="radio" name="optionsRadios" id="store" value="store" checked>Tienda
												</label>
											</div>
                               		</div>
									<div class="form-group">
										<label>Ancho de espalda</label>
										<input class="form-control" placeholder="Ingresar ancho de espalda del usuario en centímetros." id="width">
									</div>	
									<div class="form-group">
										<label>Altura</label>
										<input class="form-control" placeholder="Ingresar altura del usuario." id="height">
									</div>
									<div class="form-group">
										<label>Contraseña</label>
										<input class="form-control" type="password" placeholder="Ingresar contraseña del usuario." id="pass">
									</div>
									<div class="form-group">
										<label>Repetición de contraseña</label>
										<input class="form-control" type="password" placeholder="Ingresar nuevamente la contraseña del usuario." id="pass_rep">
									</div>	
									
								<div class="panel-footer">
									<button type="button" class="btn btn-info" id="createbtn">Crear cuenta</button>
								</div>
							</div>
						
					</div>
			</div>				
			</div>
		
	</div> <!-- /container -->
		

</body></html>